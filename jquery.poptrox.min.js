/* jquery.poptrox.js v2.5.1 | (c) n33 | n33.co | MIT licensed */
!function(a){a.fn.poptrox_disableSelection=function(){return a(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},a.fn.poptrox=function(b){function p(){j=a(window).width(),k=a(window).height()+e.windowHeightPad;var b=Math.abs(q.width()-q.outerWidth()),c=Math.abs(q.height()-q.outerHeight()),g=(s.width(),s.height(),j-2*e.windowMargin-b),h=k-2*e.windowMargin-c;q.css("min-width",e.popupWidth).css("min-height",e.popupHeight),r.children().css("max-width",g).css("max-height",h)}if(0==this.length)return a(this);if(this.length>1){for(var d=0;d<this.length;d++)a(this[d]).poptrox(b);return a(this)}var j,k,e=a.extend({preload:!1,baseZIndex:1e3,fadeSpeed:300,overlayColor:"#000000",overlayOpacity:.6,overlayClass:"poptrox-overlay",windowMargin:50,windowHeightPad:0,selector:"a",caption:null,parent:"body",popupSpeed:300,popupWidth:200,popupHeight:100,popupIsFixed:!1,useBodyOverflow:!1,usePopupEasyClose:!0,usePopupForceClose:!1,usePopupLoader:!0,usePopupCloser:!0,usePopupCaption:!1,usePopupNav:!1,usePopupDefaultStyling:!0,popupBackgroundColor:"#FFFFFF",popupTextColor:"#000000",popupLoaderTextSize:"2em",popupCloserBackgroundColor:"#000000",popupCloserTextColor:"#FFFFFF",popupCloserTextSize:"20px",popupPadding:10,popupCaptionHeight:60,popupCaptionTextSize:null,popupBlankCaptionText:"(untitled)",popupCloserText:"&#215;",popupLoaderText:"&bull;&bull;&bull;&bull;",popupClass:"poptrox-popup",popupSelector:null,popupLoaderSelector:".loader",popupCloserSelector:".closer",popupCaptionSelector:".caption",popupNavPreviousSelector:".nav-previous",popupNavNextSelector:".nav-next",onPopupClose:null,onPopupOpen:null},b),f=a(this),g=a("body"),h=a('<div class="'+e.overlayClass+'"></div>'),i=a(window),l=[],m=0,n=!1,o=new Array;e.usePopupLoader||(e.popupLoaderSelector=null),e.usePopupCloser||(e.popupCloserSelector=null),e.usePopupCaption||(e.popupCaptionSelector=null),e.usePopupNav||(e.popupNavPreviousSelector=null,e.popupNavNextSelector=null);var q;q=a(e.popupSelector?e.popupSelector:'<div class="'+e.popupClass+'">'+(e.popupLoaderSelector?'<div class="loader">'+e.popupLoaderText+"</div>":"")+'<div class="pic"></div>'+(e.popupCaptionSelector?'<div class="caption"></div>':"")+(e.popupCloserSelector?'<span class="closer">'+e.popupCloserText+"</span>":"")+(e.popupNavPreviousSelector?'<div class="nav-previous"></div>':"")+(e.popupNavNextSelector?'<div class="nav-next"></div>':"")+"</div>");var r=q.find(".pic"),s=a(),t=q.find(e.popupLoaderSelector),u=q.find(e.popupCaptionSelector),v=q.find(e.popupCloserSelector),w=q.find(e.popupNavNextSelector),x=q.find(e.popupNavPreviousSelector),y=w.add(x);if(e.usePopupDefaultStyling&&(q.css("background",e.popupBackgroundColor).css("color",e.popupTextColor).css("padding",e.popupPadding+"px"),u.length>0&&(q.css("padding-bottom",e.popupCaptionHeight+"px"),u.css("position","absolute").css("left","0").css("bottom","0").css("width","100%").css("text-align","center").css("height",e.popupCaptionHeight+"px").css("line-height",e.popupCaptionHeight+"px"),e.popupCaptionTextSize&&u.css("font-size",popupCaptionTextSize)),v.length>0&&v.html(e.popupCloserText).css("font-size",e.popupCloserTextSize).css("background",e.popupCloserBackgroundColor).css("color",e.popupCloserTextColor).css("display","block").css("width","40px").css("height","40px").css("line-height","40px").css("text-align","center").css("position","absolute").css("text-decoration","none").css("outline","0").css("top","0").css("right","-40px"),t.length>0&&t.html("").css("position","relative").css("font-size",e.popupLoaderTextSize).on("startSpinning",function(b){var c=a("<div>"+e.popupLoaderText+"</div>");c.css("height",Math.floor(e.popupHeight/2)+"px").css("overflow","hidden").css("line-height",Math.floor(e.popupHeight/2)+"px").css("text-align","center").css("margin-top",Math.floor((q.height()-c.height()+(u.length>0?u.height():0))/2)).css("color",e.popupTextColor?e.popupTextColor:"").on("xfin",function(){c.fadeTo(300,.5,function(){c.trigger("xfout")})}).on("xfout",function(){c.fadeTo(300,.05,function(){c.trigger("xfin")})}).trigger("xfin"),t.append(c)}).on("stopSpinning",function(a){var b=t.find("div");b.remove()}),2==y.length)){y.css("font-size","75px").css("text-align","center").css("color","#fff").css("text-shadow","none").css("height","100%").css("position","absolute").css("top","0").css("opacity","0.35").css("cursor","pointer").css("box-shadow","inset 0px 0px 10px 0px rgba(0,0,0,0)").poptrox_disableSelection();var z,A;e.usePopupEasyClose?(z="100px",A="100px"):(z="75%",A="25%"),w.css("right","0").css("width",z).html('<div style="position: absolute; height: 100px; width: 125px; top: 50%; right: 0; margin-top: -50px;">&gt;</div>'),x.css("left","0").css("width",A).html('<div style="position: absolute; height: 100px; width: 125px; top: 50%; left: 0; margin-top: -50px;">&lt;</div>')}return i.on("resize orientationchange",function(){p()}),u.on("update",function(a,b){b&&0!=b.length||(b=e.popupBlankCaptionText),u.html(b)}),v.css("cursor","pointer").on("click",function(a){return a.preventDefault(),a.stopPropagation(),q.trigger("poptrox_close"),!0}),w.on("click",function(a){a.stopPropagation(),a.preventDefault(),q.trigger("poptrox_next")}),x.on("click",function(a){a.stopPropagation(),a.preventDefault(),q.trigger("poptrox_previous")}),h.css("position","fixed").css("left",0).css("top",0).css("z-index",e.baseZIndex).css("width","100%").css("height","100%").css("text-align","center").css("cursor","pointer").appendTo(e.parent).prepend('<div style="display:inline-block;height:100%;vertical-align:middle;"></div>').append('<div style="position:absolute;left:0;top:0;width:100%;height:100%;background:'+e.overlayColor+";opacity:"+e.overlayOpacity+";filter:alpha(opacity="+100*e.overlayOpacity+');"></div>').hide().on("touchmove",function(a){return!1}).on("click",function(a){a.preventDefault(),a.stopPropagation(),q.trigger("poptrox_close")}),q.css("display","inline-block").css("vertical-align","middle").css("position","relative").css("z-index",1).css("cursor","auto").appendTo(h).hide().on("poptrox_next",function(){var a=m+1;a>=l.length&&(a=0),q.trigger("poptrox_switch",[a])}).on("poptrox_previous",function(){var a=m-1;a<0&&(a=l.length-1),q.trigger("poptrox_switch",[a])}).on("poptrox_reset",function(){p(),q.data("width",e.popupWidth).data("height",e.popupHeight),t.hide().trigger("stopSpinning"),u.hide(),v.hide(),y.hide(),r.hide(),s.attr("src","").detach()}).on("poptrox_open",function(a,b){return!!n||(n=!0,e.useBodyOverflow&&g.css("overflow","hidden"),e.onPopupOpen&&e.onPopupOpen(),void h.fadeTo(e.fadeSpeed,1,function(){q.trigger("poptrox_switch",[b,!0])}))}).on("poptrox_switch",function(b,c,d){var f;if(!d&&n)return!0;if(n=!0,q.css("width",q.data("width")).css("height",q.data("height")),u.hide(),s.attr("src")&&s.attr("src",""),s.detach(),f=l[c],s=f.object,s.off("load"),r.css("text-indent","-9999px").show().append(s),"ajax"==f.type?a.get(f.src,function(a){s.html(a),s.trigger("load")}):s.attr("src",f.src),"image"!=f.type){var h,j;h=f.width,j=f.height,"%"==h.slice(-1)&&(h=parseInt(h.substring(0,h.length-1))/100*i.width()),"%"==j.slice(-1)&&(j=parseInt(j.substring(0,j.length-1))/100*i.height()),s.css("position","relative").css("outline","0").css("z-index",e.baseZIndex+100).width(h).height(j)}t.trigger("startSpinning").fadeIn(300),q.show(),e.popupIsFixed?(q.width(e.popupWidth).height(e.popupHeight),s.on("load",function(){s.off("load"),t.hide().trigger("stopSpinning"),u.trigger("update",[f.captionText]).fadeIn(e.fadeSpeed),v.fadeIn(e.fadeSpeed),r.css("text-indent",0).hide().fadeIn(e.fadeSpeed,function(){n=!1}),m=c,y.fadeIn(e.fadeSpeed)})):s.on("load",function(){p(),s.off("load"),t.hide().trigger("stopSpinning");var a=s.width(),b=s.height(),d=function(){u.trigger("update",[f.captionText]).fadeIn(e.fadeSpeed),v.fadeIn(e.fadeSpeed),r.css("text-indent",0).hide().fadeIn(e.fadeSpeed,function(){n=!1}),m=c,y.fadeIn(e.fadeSpeed),q.data("width",a).data("height",b).css("width","auto").css("height","auto")};a==q.data("width")&&b==q.data("height")?d():q.animate({width:a,height:b},e.popupSpeed,"swing",d)}),"image"!=f.type&&s.trigger("load")}).on("poptrox_close",function(){return!(!n||e.usePopupForceClose)||(n=!0,q.hide().trigger("poptrox_reset"),e.onPopupClose&&e.onPopupClose(),void h.fadeOut(e.fadeSpeed,function(){e.useBodyOverflow&&g.css("overflow","auto"),n=!1}))}).trigger("poptrox_reset"),e.usePopupEasyClose?(u.on("click","a",function(a){a.stopPropagation()}),q.css("cursor","pointer").on("click",function(a){a.stopPropagation(),a.preventDefault(),q.trigger("poptrox_close")})):q.on("click",function(a){a.stopPropagation()}),i.keydown(function(a){if(q.is(":visible"))switch(a.keyCode){case 37:case 32:if(e.usePopupNav)return q.trigger("poptrox_previous"),!1;break;case 39:if(e.usePopupNav)return q.trigger("poptrox_next"),!1;break;case 27:return q.trigger("poptrox_close"),!1}}),f.find(e.selector).each(function(b){var d,f,g=a(this),h=g.find("img"),i=g.data("poptrox");if("ignore"!=i&&g.attr("href")){if(d={src:g.attr("href"),captionText:h.attr("title"),width:null,height:null,type:null,object:null,options:null},e.caption){if("function"==typeof e.caption)c=e.caption(g);else if("selector"in e.caption){var j;j=g.find(e.caption.selector),"attribute"in e.caption?c=j.attr(e.caption.attribute):(c=j.html(),e.caption.remove===!0&&j.remove())}}else c=h.attr("title");if(d.captionText=c,i){var k=i.split(",");0 in k&&(d.type=k[0]),1 in k&&(f=k[1].match(/([0-9%]+)x([0-9%]+)/),f&&3==f.length&&(d.width=f[1],d.height=f[2])),2 in k&&(d.options=k[2])}if(!d.type)switch(f=d.src.match(/\/\/([a-z0-9\.]+)\/.*/),(!f||f.length<2)&&(f=[!1]),f[1]){case"api.soundcloud.com":d.type="soundcloud";break;case"youtu.be":d.type="youtube";break;case"vimeo.com":d.type="vimeo";break;case"wistia.net":d.type="wistia";break;case"bcove.me":d.type="bcove";break;default:d.type="image"}switch(f=d.src.match(/\/\/[a-z0-9\.]+\/(.*)/),d.type){case"iframe":d.object=a('<iframe src="" frameborder="0"></iframe>'),d.object.on("click",function(a){a.stopPropagation()}).css("cursor","auto"),d.width&&d.height||(d.width="600",d.height="400");break;case"ajax":d.object=a('<div class="poptrox-ajax"></div>'),d.object.on("click",function(a){a.stopPropagation()}).css("cursor","auto").css("overflow","auto"),d.width&&d.height||(d.width="600",d.height="400");break;case"soundcloud":d.object=a('<iframe scrolling="no" frameborder="no" src=""></iframe>'),d.src="//w.soundcloud.com/player/?url="+escape(d.src)+(d.options?"&"+d.options:""),d.width="600",d.height="166";break;case"youtube":d.object=a('<iframe src="" frameborder="0" allowfullscreen="1"></iframe>'),d.src="//www.youtube.com/embed/"+f[1]+(d.options?"?"+d.options:""),d.width&&d.height||(d.width="800",d.height="480");break;case"vimeo":d.object=a('<iframe src="" frameborder="0" allowFullScreen="1"></iframe>'),d.src="//player.vimeo.com/video/"+f[1]+(d.options?"?"+d.options:""),d.width&&d.height||(d.width="800",d.height="480");break;case"wistia":d.object=a('<iframe src="" frameborder="0" allowFullScreen="1"></iframe>'),d.src="//fast.wistia.net/"+f[1]+(d.options?"?"+d.options:""),d.width&&d.height||(d.width="800",d.height="480");break;case"bcove":d.object=a('<iframe src="" frameborder="0" allowFullScreen="1" width="100%"></iframe>'),d.src="//bcove.me/"+f[1]+(d.options?"?"+d.options:""),d.width&&d.height||(d.width="640",d.height="360");break;default:if(d.object=a('<img src="" alt="" style="vertical-align:bottom" />'),e.preload){var f=document.createElement("img");f.src=d.src,o.push(f)}d.width=g.attr("width"),d.height=g.attr("height")}"file:"==window.location.protocol&&d.src.match(/^\/\//)&&(d.src="http:"+d.src),l.push(d),h.attr("title",""),g.attr("href","").css("outline",0).on("click",function(a){a.preventDefault(),a.stopPropagation(),q.trigger("poptrox_open",[b])})}}),a(this)}}(jQuery);